{"version":3,"sources":["evrythng-ws.js"],"names":["root","factory","define","amd","EVT","WS","Evrythng","mqtt","this","_generateClientId","prefix","Math","random","toString","substr","_isClientConnected","scope","wsClient","connected","_getClient","connectPromiseMap","apiKey","Promise","resolve","reject","_cleanUp","error","client","end","_initClient","subscribeMap","forEach","topic","subscribe","mqttClient","settings","EVTWsPlugin","mqttOptions","username","password","clientId","clientIdPrefix","keepalive","keepAlive","reconnectPeriod","connect","apiUrl","on","_publishMessage","message","successCallback","errorCallback","$this","then","publishHandler","err","JSON","stringify","jsonify","publish","path","_addSubscription","indexOf","push","_removeSubscription","idx","splice","version","defaultSettings","setup","customSettings","Object","prototype","call","TypeError","i","hasOwnProperty","console","warn","install","Resource","Action","messageCallback","subscriptionHandler","response","parse","e","unsubscribe","unsubscriptionHandler","connectErr","Error","method","transferToPublish","request","options","cancel","data","interceptors","cancelled","$inject"],"mappings":"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","file":"evrythng-ws.min.js"}