{"version":3,"sources":["evrythng-ws.js"],"names":["root","factory","define","amd","EVT","WS","Evrythng","mqtt","this","_generateClientId","prefix","Math","random","toString","substr","_isClientConnected","scope","wsClient","connected","_getClient","connectPromiseMap","apiKey","Promise","resolve","reject","_cleanUp","error","client","end","_initClient","subscribeMap","forEach","topic","subscribe","mqttClient","settings","EVTWsPlugin","mqttOptions","username","password","clientId","clientIdPrefix","keepalive","keepAlive","reconnectPeriod","connect","apiUrl","on","_publishMessage","message","successCallback","errorCallback","$this","then","publishHandler","err","JSON","stringify","jsonify","publish","path","_addSubscription","indexOf","push","_removeSubscription","subscriptions","has","Boolean","length","idx","splice","version","defaultSettings","setup","customSettings","Object","prototype","call","TypeError","i","hasOwnProperty","console","warn","install","Resource","Action","messageCallback","subscriptionHandler","response","parse","e","unsubscribe","unsubscriptionHandler","connectErr","Error","method","transferToPublish","request","options","cancel","data","interceptors","cancelled","$inject"],"mappings":"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","file":"evrythng-ws.min.js"}